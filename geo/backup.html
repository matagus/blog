

<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Markercluster with Mapbox marker data</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' rel='stylesheet' />
  <style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />
</head>
<body>
  <div id='map'></div>
</body>
<script>
  L.mapbox.accessToken = 'pk.eyJ1IjoibWF0YWd1cyIsImEiOiJHaEdPVEQwIn0.-Ozf1tLmk77e8WsCXkxw1A';
  // Here we don't use the second argument to map, since that would automatically
  // load in non-clustered markers from the layer. Instead we add just the
  // backing tileLayer, and then use the featureLayer only for its data.
  var map = L.mapbox.map('map', 'matagus.jni44nnb');
  var geojsonUrl = "http://prod-streams.streema.com/tuneins.geojson";
  var geojsonUrl = "file:///home/matagus/projects/github/matagus.github.com/geo/tuneins.geojson";

  $.getJSON(geojsonUrl, function(data) {
    var clusterGroup = new L.MarkerClusterGroup();
    data.features.forEach(function(feature, index) {
      var layer = new L.geoJson(feature);
      layer.bindPopup(
        "<h5>" + feature.properties.title +
        "</h5><br/><p>" + feature.properties.description  +  "</p>"
      );
      clusterGroup.addLayer(layer);
    });
    map.addLayer(clusterGroup);
  });
</script>
</html>
